import {info} from "./utils.spec";

/**
 * Created by Papa on 12/1/2016.
 */


export async function initializeTQ(
	done,
	databaseNames: string[]
) {
	let failed = false;
	try {
		await TQ.initializeAll(StoreType.SQLJS);

		for (const dbName of databaseNames) {
			if (TQ.isInitialized(dbName)) {
				return;
			}
			await TQ.addDataStore(StoreType.SQLJS, dbName);

			await TQ.db(dbName).entityManager.goOnline();
			info(`\n\t---===<<<((( Initialized DB: ${dbName} )))>>>===---\n`);
		}

	} catch (error) {
		failed = true;
		console.log(error);
		done.fail(`Error running TQ.init+goOnline on dbs: ${databaseNames.reduce(( all, value ) => all + ' ' + value)}`);
	}
}


